---
  - hosts: caddy
    roles:
      - role: ironicbadger.figurine
      - role: ironicbadger.tailscale-routes-fix
      - role: ironicbadger.caddy
        tags: caddy

  - hosts: wd-ts-sr
    roles:
      - role: ironicbadger.figurine
      - role: ironicbadger.tailscale-routes-fix

### SERVERS
  - hosts: c137
    roles:
      #- role: ironicbadger.figurine
      - role: ktz-server-welcome
      #- role: ironicbadger.proxmox-host-nvidia-setup
      - role: ironicbadger.tailscale-routes-fix
      - role: ironicbadger.packages
      #- role: nix-manager
      # - role: ironicbadger.mounts
      #   tags: mounts
      - role: zrepl
        tags: zrepl
      - role: ironicbadger.docker-compose-generator
        tags: compose
      - role: systemd-timer-plex
        tags: plex-restart

  - hosts: ms01
    roles:
      #- role: ironicbadger.figurine
      - role: ktz-server-welcome
      - role: ironicbadger.tailscale-routes-fix
      - role: ironicbadger.packages

  - hosts: meeseeks
    roles:
      #- role: ironicbadger.figurine
      - role: ktz-server-welcome
      - role: ironicbadger.tailscale-routes-fix
      - role: ironicbadger.packages

### LXCs
  - hosts: immich-app
    vars:
      docker_compose_hostname: lxc-immich-app
      appdata_path: /mnt/appdata
    roles:
      - role: ironicbadger.figurine
      - role: ironicbadger.docker-compose-generator
        tags: compose

  - hosts: immich-ml
    vars:
      docker_compose_hostname: lxc-immich-ml
    roles:
      - role: ironicbadger.figurine
      - role: ironicbadger.docker-compose-generator
        tags: compose

  - hosts: ollama
    vars:
      docker_compose_hostname: lxc-ollama
      appdata_path: /mnt/appdata
    roles:
      - role: ironicbadger.figurine
      - role: ironicbadger.docker-compose-generator
        tags: compose


# EXTERNAL
## vps
  - hosts: ktz-cloud
    roles:
      - role: ironicbadger.docker-compose-generator
        tags: compose


## igloo
  - hosts: igloo
    roles:
      - role: ironicbadger.figurine
      - role: ironicbadger.packages
      - role: zrepl
        tags: zrepl
      - role: ironicbadger.docker-compose-generator
        tags: compose

## norbert
  - hosts: norbert
    roles:
      - role: ironicbadger.figurine
      - role: ironicbadger.packages
      - role: ironicbadger.tailscale-routes-fix
      - role: ironicbadger.docker-compose-generator
        tags: compose