---
### CORE INFRA
  - hosts: neo
    vars_files:
    - 'group_vars/secrets.yaml'
    roles:
      - role: ironicbadger.figurine
      - role: ironicbadger.tailscale-routes-fix
      - role: ironicbadger.docker-compose-generator
        tags: compose

  - hosts: caddy
    vars_files:
    - 'group_vars/secrets.yaml'
    roles:
      - role: ironicbadger.figurine
      - role: ironicbadger.tailscale-routes-fix
      - role: ironicbadger.caddy
        tags: caddy

  - hosts: wd-ts-sr
    roles:
      - role: ironicbadger.figurine
      - role: ironicbadger.tailscale-routes-fix

### SERVERS

  - hosts: morphnix
    vars_files:
    - 'group_vars/secrets.yaml'
    roles:
      - role: ironicbadger.docker-compose-generator
        tags: compose

  - hosts: c137
    vars_files:
    - 'group_vars/secrets.yaml'
    vars_prompt:
      - name: "lxc_id"
        prompt: "Enter LXC container ID"
    roles:
      - role: ironicbadger.figurine
      - role: proxmox-host-nvidia-setup
        tags: proxmox
      - role: proxmox-lxc-nvidia-setup
        tags: lxc
      # - role: ironicbadger.tailscale-routes-fix
      # - role: ironicbadger.docker-compose-generator
      #   tags: compose

### VIRTUAL MACHINES

  - hosts: nvllama
    vars_files:
    - 'group_vars/secrets.yaml'
    roles:
      - role: ironicbadger.docker-compose-generator
        tags: compose

### OFFSITE

  - hosts: ktz-cloud
    vars_files:
    - 'group_vars/secrets.yaml'
    roles:
      - role: ironicbadger.docker-compose-generator
        tags: compose
